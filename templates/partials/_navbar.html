{% load static %}
<nav class="navbar">
    <div class="navbar-content">
        <div class="logo-mini-wrapper">
            <img src="{% static 'nobleui/images/logo-mini-light.png' %}" class="logo-mini logo-mini-light" alt="logo" width="40" height="40">
            <img src="{% static 'nobleui/images/logo-mini-dark.png' %}" class="logo-mini logo-mini-dark" alt="logo" width="40" height="40">
        </div>
        <form class="search-form" method="get" action="#">
            <div class="input-group">
                <div class="input-group-text">
                    <i data-lucide="search"></i>
                </div>
                <input type="text" class="form-control" id="navbarForm" placeholder="搜索..." name="q">
            </div>
        </form>
        <ul class="navbar-nav">
            <li class="theme-switcher-wrapper nav-item">
                <input type="checkbox" value="" id="theme-switcher">
                <label for="theme-switcher">
                    <div class="box">
                        <div class="ball"></div>
                        <div class="icons">
                            <i data-lucide="sun"></i>
                            <i data-lucide="moon"></i>
                        </div>
                    </div>
                </label>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="notificationDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i data-lucide="bell"></i>
                    {% comment %}
                    <div class="indicator">
                        <div class="circle"></div>
                    </div>
                    {% endcomment %}
                </a>
                <div class="dropdown-menu p-0" aria-labelledby="notificationDropdown">
                    <div class="px-3 py-2 d-flex align-items-center justify-content-between border-bottom">
                        <p>通知</p>
                        <a href="javascript:;" class="text-secondary">全部标记已读</a>
                    </div>
                    <div class="p-1">
                        <p class="text-center text-secondary py-3">暂无新通知</p>
                    </div>
                    <div class="px-3 py-2 d-flex align-items-center justify-content-center border-top">
                        <a href="javascript:;">查看全部</a>
                    </div>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    {% if user.is_authenticated %}
                        <img class="w-30px h-30px ms-1 rounded-circle" src="https://ui-avatars.com/api/?name={{ user.username }}&background=random" alt="profile" width="30" height="30">
                    {% else %}
                        <img class="w-30px h-30px ms-1 rounded-circle" src="https://ui-avatars.com/api/?name=Guest&background=random" alt="profile" width="30" height="30">
                    {% endif %}
                </a>
                <div class="dropdown-menu p-0" aria-labelledby="profileDropdown">
                    {% if user.is_authenticated %}
                        <div class="d-flex flex-column align-items-center border-bottom px-5 py-3">
                            <div class="mb-3">
                                <img class="w-80px h-80px rounded-circle" src="https://ui-avatars.com/api/?name={{ user.username }}&size=80&background=random" alt="用户头像" width="80" height="80">
                            </div>
                            <div class="text-center">
                                <p class="fs-16px fw-bolder">{{ user.username }}</p>
                                <p class="fs-12px text-secondary">{{ user.email }}</p>
                            </div>
                        </div>
                        <ul class="list-unstyled p-1">
                            <li>
                                <a href="{% url 'accounts:profile' %}" class="dropdown-item py-2 text-body ms-0">
                                    <i class="me-2 icon-md" data-lucide="user"></i>
                                    <span>个人资料</span>
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'accounts:profile_edit' %}" class="dropdown-item py-2 text-body ms-0">
                                    <i class="me-2 icon-md" data-lucide="edit"></i>
                                    <span>编辑资料</span>
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'points:my_points' %}" class="dropdown-item py-2 text-body ms-0">
                                    <i class="me-2 icon-md" data-lucide="award"></i>
                                    <span>我的积分</span>
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'accounts:shop_list' %}" class="dropdown-item py-2 text-body ms-0">
                                    <i class="me-2 icon-md" data-lucide="shopping-bag"></i>
                                    <span>积分商城</span>
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'accounts:redemption_list' %}" class="dropdown-item py-2 text-body ms-0">
                                    <i class="me-2 icon-md" data-lucide="package"></i>
                                    <span>兑换记录</span>
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'accounts:change_password' %}" class="dropdown-item py-2 text-body ms-0">
                                    <i class="me-2 icon-md" data-lucide="lock"></i>
                                    <span>修改密码</span>
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'accounts:logout' %}" class="dropdown-item py-2 text-body ms-0">
                                    <i class="me-2 icon-md" data-lucide="log-out"></i>
                                    <span>退出登录</span>
                                </a>
                            </li>
                        </ul>
                    {% else %}
                        <ul class="list-unstyled p-1">
                            <li>
                                <a href="{% url 'accounts:sign_in' %}" class="dropdown-item py-2 text-body ms-0">
                                    <i class="me-2 icon-md" data-lucide="log-in"></i>
                                    <span>登录</span>
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'accounts:sign_up' %}" class="dropdown-item py-2 text-body ms-0">
                                    <i class="me-2 icon-md" data-lucide="user-plus"></i>
                                    <span>注册</span>
                                </a>
                            </li>
                        </ul>
                    {% endif %}
                </div>
            </li>
        </ul>
        <a href="#" class="sidebar-toggler">
            <i data-lucide="menu"></i>
        </a>
    </div>
</nav>
