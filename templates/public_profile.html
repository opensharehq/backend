{% load static %}
<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <meta name="description" content="{{ profile_user.username }} - OpenShare 开发者个人资料" />
        <meta name="author" content="OpenShare" />
        <meta name="keywords" content="开源, 开发者, {{ profile_user.username }}, 个人资料, GitHub, 积分, 贡献" />

        <title>{{ profile_user.username }} - OpenShare</title>
        <script src="//unpkg.com/alpinejs" defer></script>

        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet" />

        <!-- NobleUI Core CSS -->
        <link rel="stylesheet" href="{% static 'nobleui/vendors/core/core.css' %}" />
        <link rel="stylesheet" href="{% static 'nobleui/css/demo2/style.css' %}" />

        <style>
            /* Custom Landing Page Styles */
            body {
                font-family: "Roboto", sans-serif;
                background: #f8f9fa;
            }

            /* Navbar */
            .landing-navbar {
                background: rgba(255, 255, 255, 0.95);
                backdrop-filter: blur(10px);
                box-shadow: 0 2px 20px rgba(0, 0, 0, 0.05);
                position: sticky;
                top: 0;
                z-index: 1000;
            }

            /* Hero Section */
            .hero-section {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                padding: 80px 0 60px;
                color: white;
                position: relative;
                overflow: hidden;
            }

            .hero-section::before {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
                opacity: 0.1;
            }

            .user-avatar-large {
                width: 120px;
                height: 120px;
                border-radius: 50%;
                background: white;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #667eea;
                font-size: 3rem;
                font-weight: 900;
                margin: 0 auto 1.5rem;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            }

            .hero-title {
                font-size: 2.5rem;
                font-weight: 900;
                margin-bottom: 0.5rem;
            }

            .hero-subtitle {
                font-size: 1.2rem;
                font-weight: 300;
                opacity: 0.95;
                margin-bottom: 1.5rem;
            }

            /* Cards */
            .info-card {
                background: white;
                border-radius: 15px;
                padding: 2rem;
                box-shadow: 0 5px 25px rgba(0, 0, 0, 0.08);
                margin-bottom: 2rem;
                transition: all 0.3s;
            }

            .info-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.12);
            }

            .card-title-custom {
                font-size: 1.3rem;
                font-weight: 700;
                margin-bottom: 1.5rem;
                color: #2c3e50;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .info-item {
                margin-bottom: 1.5rem;
            }

            .info-item:last-child {
                margin-bottom: 0;
            }

            .info-label {
                font-size: 0.85rem;
                color: #6c757d;
                margin-bottom: 0.3rem;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }

            .info-value {
                font-size: 1.1rem;
                color: #2c3e50;
                font-weight: 500;
            }

            /* Social Links */
            .social-link {
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                padding: 0.5rem 1rem;
                border-radius: 10px;
                border: 2px solid #e9ecef;
                text-decoration: none;
                color: #2c3e50;
                transition: all 0.3s;
                margin-right: 0.5rem;
                margin-bottom: 0.5rem;
            }

            .social-link:hover {
                border-color: #667eea;
                color: #667eea;
                transform: translateY(-2px);
            }

            /* Points Badge */
            .points-display {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 2rem;
                border-radius: 15px;
                text-align: center;
            }

            .points-number {
                font-size: 3rem;
                font-weight: 900;
                margin-bottom: 0.5rem;
            }

            .points-label {
                font-size: 1.1rem;
                opacity: 0.9;
            }

            /* Timeline */
            .timeline-item {
                position: relative;
                padding-left: 2.5rem;
                padding-bottom: 2rem;
                border-left: 2px solid #e9ecef;
            }

            .timeline-item:last-child {
                border-left: 2px solid transparent;
                padding-bottom: 0;
            }

            .timeline-icon {
                position: absolute;
                left: -1.2rem;
                top: 0;
                width: 2.5rem;
                height: 2.5rem;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
            }

            .timeline-icon-sm {
                width: 16px;
                height: 16px;
            }

            .timeline-title {
                font-size: 1.1rem;
                font-weight: 700;
                color: #2c3e50;
                margin-bottom: 0.3rem;
            }

            .timeline-subtitle {
                color: #6c757d;
                margin-bottom: 0.5rem;
            }

            .timeline-date {
                font-size: 0.9rem;
                color: #6c757d;
            }

            /* Footer */
            .footer {
                background: #2c3e50;
                color: white;
                padding: 3rem 0 1.5rem;
                margin-top: 4rem;
            }

            .footer a {
                color: rgba(255, 255, 255, 0.7);
                text-decoration: none;
                transition: color 0.3s;
            }

            .footer a:hover {
                color: white;
            }

            /* Brand Colors */
            .brand-primary {
                color: #667eea;
            }

            .brand-secondary {
                color: #764ba2;
            }

            /* User Avatar in Navbar */
            .user-avatar {
                width: 40px;
                height: 40px;
                border-radius: 50%;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-weight: 700;
                cursor: pointer;
                transition: all 0.3s;
                text-decoration: none;
            }

            .user-avatar:hover {
                transform: scale(1.1);
                box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
                color: white;
            }

            /* Dropdown Menu */
            .user-dropdown {
                position: relative;
            }

            .dropdown-menu-custom {
                position: absolute;
                top: 100%;
                right: 0;
                margin-top: 0.5rem;
                background: white;
                border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
                min-width: 200px;
                padding: 0.5rem 0;
                opacity: 0;
                visibility: hidden;
                transform: translateY(-10px);
                transition: all 0.3s ease;
                z-index: 1000;
            }

            .dropdown-menu-custom::before {
                content: "";
                position: absolute;
                top: -0.5rem;
                left: 0;
                right: 0;
                height: 0.5rem;
                background: transparent;
            }

            .user-dropdown:hover .dropdown-menu-custom,
            .dropdown-menu-custom:hover {
                opacity: 1;
                visibility: visible;
                transform: translateY(0);
            }

            .dropdown-menu-custom a {
                display: block;
                padding: 0.7rem 1.5rem;
                color: #2c3e50;
                text-decoration: none;
                transition: all 0.2s;
            }

            .dropdown-menu-custom a:hover {
                background: #f8f9fa;
                color: #667eea;
            }

            .dropdown-menu-custom hr {
                margin: 0.5rem 0;
                border-color: #e9ecef;
            }

            /* Content Section */
            .content-section {
                padding: 3rem 0;
            }

            .empty-state-icon {
                width: 64px;
                height: 64px;
                color: #e9ecef;
                margin-bottom: 1rem;
            }

            /* Responsive */
            @media (max-width: 768px) {
                .hero-title {
                    font-size: 2rem;
                }

                .points-number {
                    font-size: 2.5rem;
                }

                .user-avatar-large {
                    width: 100px;
                    height: 100px;
                    font-size: 2.5rem;
                }
            }
        </style>
    </head>
    <body>
        <!-- Navbar -->
        <nav class="landing-navbar">
            <div class="container">
                <div class="d-flex align-items-center justify-content-between py-3">
                    <a href="{% url 'homepage:index' %}" class="navbar-brand d-flex align-items-center text-decoration-none">
                        <h3 class="mb-0 fw-bold brand-primary">
                            Open<span class="brand-secondary">Share</span>
                        </h3>
                    </a>
                    <div class="d-flex align-items-center gap-3">
                        {% if user.is_authenticated %}
                            <!-- Logged in user -->
                            <div class="user-dropdown">
                                <a href="{% url 'accounts:profile' %}" class="user-avatar">
                                    {{ user.username|slice:":2"|upper }}
                                </a>
                                <div class="dropdown-menu-custom">
                                    <a href="{% url 'accounts:profile' %}">
                                        <i data-lucide="user" class="me-2"></i>个人资料
                                    </a>
                                    <a href="{% url 'accounts:shop_list' %}">
                                        <i data-lucide="shopping-bag" class="me-2"></i>积分商城
                                    </a>
                                    <a href="{% url 'accounts:redemption_list' %}">
                                        <i data-lucide="gift" class="me-2"></i>我的兑换
                                    </a>
                                    <hr />
                                    <a href="{% url 'accounts:logout' %}">
                                        <i data-lucide="log-out" class="me-2"></i>退出登录
                                    </a>
                                </div>
                            </div>
                        {% else %}
                            <!-- Not logged in -->
                            <a href="{% url 'accounts:sign_in' %}" class="btn btn-outline-primary rounded-pill px-4">登录</a>
                            <a href="{% url 'accounts:sign_up' %}" class="btn btn-primary rounded-pill px-4">注册</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="hero-section">
            <div class="container">
                <div class="row justify-content-center text-center">
                    <div class="col-lg-8">
                        <div class="user-avatar-large">
                            {{ profile_user.username|slice:":2"|upper }}
                        </div>
                        <h1 class="hero-title">{{ profile_user.username }}</h1>
                        {% if profile.bio %}
                            <p class="hero-subtitle">{{ profile.bio }}</p>
                        {% else %}
                            <p class="hero-subtitle">开源贡献者</p>
                        {% endif %}
                        {% if profile.location %}
                            <p class="mb-0">
                                <i data-lucide="map-pin" class="me-1"></i> {{ profile.location }}
                            </p>
                        {% endif %}
                        {% if profile.company %}
                            <p class="mb-0">
                                <i data-lucide="briefcase" class="me-1"></i> {{ profile.company }}
                            </p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </section>

        <!-- Content Section -->
        <section class="content-section">
            <div class="container">
                <div class="row">
                    <!-- Left Column -->
                    <div class="col-lg-4 mb-4">
                        <!-- Points Card -->
                        <div class="points-display">
                            <div class="points-number">{{ total_points }}</div>
                            <div class="points-label">总积分</div>
                        </div>

                        <!-- Social Links Card -->
                        {% if profile.github_url or profile.homepage_url or profile.blog_url or profile.twitter_url or profile.linkedin_url %}
                            <div class="info-card mt-4">
                                <h6 class="card-title-custom">
                                    <i data-lucide="link"></i> 社交链接
                                </h6>
                                <div class="d-flex flex-wrap">
                                    {% if profile.github_url %}
                                        <a href="{{ profile.github_url }}" target="_blank" rel="noopener noreferrer" class="social-link">
                                            <i data-lucide="github"></i> GitHub
                                        </a>
                                    {% endif %}
                                    {% if profile.homepage_url %}
                                        <a href="{{ profile.homepage_url }}" target="_blank" rel="noopener noreferrer" class="social-link">
                                            <i data-lucide="home"></i> 主页
                                        </a>
                                    {% endif %}
                                    {% if profile.blog_url %}
                                        <a href="{{ profile.blog_url }}" target="_blank" rel="noopener noreferrer" class="social-link">
                                            <i data-lucide="book-open"></i> 博客
                                        </a>
                                    {% endif %}
                                    {% if profile.twitter_url %}
                                        <a href="{{ profile.twitter_url }}" target="_blank" rel="noopener noreferrer" class="social-link">
                                            <i data-lucide="twitter"></i> Twitter
                                        </a>
                                    {% endif %}
                                    {% if profile.linkedin_url %}
                                        <a href="{{ profile.linkedin_url }}" target="_blank" rel="noopener noreferrer" class="social-link">
                                            <i data-lucide="linkedin"></i> LinkedIn
                                        </a>
                                    {% endif %}
                                </div>
                            </div>
                        {% endif %}
                    </div>

                    <!-- Right Column -->
                    <div class="col-lg-8">
                        <!-- Work Experience -->
                        {% if work_experiences %}
                            <div class="info-card">
                                <h6 class="card-title-custom">
                                    <i data-lucide="briefcase"></i> 工作经历
                                </h6>
                                <div class="timeline">
                                    {% for work in work_experiences %}
                                        <div class="timeline-item">
                                            <div class="timeline-icon">
                                                <i data-lucide="circle" class="timeline-icon-sm"></i>
                                            </div>
                                            <div class="timeline-title">{{ work.title }}</div>
                                            <div class="timeline-subtitle">{{ work.company_name }}</div>
                                            {% if work.description %}
                                                <p class="mb-2">{{ work.description }}</p>
                                            {% endif %}
                                            <div class="timeline-date">
                                                {{ work.start_date|date:"Y年m月" }} -
                                                {% if work.end_date %}
                                                    {{ work.end_date|date:"Y年m月" }}
                                                {% else %}
                                                    至今
                                                {% endif %}
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        {% endif %}

                        <!-- Education -->
                        {% if educations %}
                            <div class="info-card">
                                <h6 class="card-title-custom">
                                    <i data-lucide="graduation-cap"></i> 学习经历
                                </h6>
                                <div class="timeline">
                                    {% for edu in educations %}
                                        <div class="timeline-item">
                                            <div class="timeline-icon">
                                                <i data-lucide="circle" class="timeline-icon-sm"></i>
                                            </div>
                                            <div class="timeline-title">{{ edu.institution_name }}</div>
                                            <div class="timeline-subtitle">
                                                {{ edu.field_of_study }}
                                                {% if edu.degree %}
                                                    <span class="badge bg-secondary ms-2">{{ edu.degree }}</span>
                                                {% endif %}
                                            </div>
                                            <div class="timeline-date">
                                                {{ edu.start_date|date:"Y年m月" }} -
                                                {% if edu.end_date %}
                                                    {{ edu.end_date|date:"Y年m月" }}
                                                {% else %}
                                                    至今
                                                {% endif %}
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        {% endif %}

                        <!-- Empty State -->
                        {% if not work_experiences and not educations %}
                            <div class="info-card text-center">
                                <i data-lucide="user" class="empty-state-icon"></i>
                                <p class="text-muted mb-0">该用户还没有添加工作经历和学习经历</p>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 mb-4 mb-lg-0">
                        <h4 class="mb-3 fw-bold">OpenShare</h4>
                        <p class="text-white-50">为开发者提供激励，让每一份开源贡献都值得回报</p>
                    </div>
                    <div class="col-lg-2 col-md-3 col-6 mb-4 mb-lg-0">
                        <h5 class="mb-3">产品</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2"><a href="#">功能</a></li>
                            <li class="mb-2"><a href="#">定价</a></li>
                            <li class="mb-2"><a href="{% url 'accounts:shop_list' %}">积分商城</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-2 col-md-3 col-6 mb-4 mb-lg-0">
                        <h5 class="mb-3">资源</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2"><a href="#">文档</a></li>
                            <li class="mb-2"><a href="#">API</a></li>
                            <li class="mb-2"><a href="#">博客</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-2 col-md-3 col-6 mb-4 mb-lg-0">
                        <h5 class="mb-3">公司</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2"><a href="#">关于我们</a></li>
                            <li class="mb-2"><a href="#">联系我们</a></li>
                            <li class="mb-2"><a href="#">加入我们</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-2 col-md-3 col-6">
                        <h5 class="mb-3">社交</h5>
                        <div class="d-flex gap-3">
                            <a href="#"><i data-lucide="github" class="fs-4"></i></a>
                            <a href="#"><i data-lucide="twitter" class="fs-4"></i></a>
                            <a href="#"><i data-lucide="linkedin" class="fs-4"></i></a>
                        </div>
                    </div>
                </div>
                <hr class="my-4 bg-white opacity-25" />
                <div class="text-center text-white-50">
                    <p class="mb-0">© 2025 OpenShare. All rights reserved.</p>
                </div>
            </div>
        </footer>

        <!-- Scripts -->
        <script src="{% static 'nobleui/vendors/core/core.js' %}"></script>
        <script src="{% static 'nobleui/vendors/lucide/lucide.min.js' %}"></script>
        <script src="{% static 'nobleui/js/template.js' %}"></script>
        <script>
            // Initialize Lucide Icons
            if (window.lucide) {
                lucide.createIcons();
            }
        </script>
    </body>
</html>
