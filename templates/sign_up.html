{% extends "auth_base.html" %}

{% block title %}注册{% endblock title %}

{% block auth_content %}
    <h5 class="text-secondary fw-normal mb-4">创建您的账号，开始使用 OpenShare</h5>
    <!-- 注册表单 -->
    <form method="post" action="{% url 'accounts:sign_up' %}" class="forms-sample">
        {% csrf_token %}
        <div class="mb-3">
            <label for="username" class="form-label">用户名</label>
            <input type="text"
                   class="form-control {% if form.username.errors %}is-invalid{% endif %}"
                   id="username"
                   name="username"
                   value="{{ form.username.value|default:'' }}"
                   placeholder="请输入用户名"
                   required>
            {% if form.username.errors %}
                <div class="invalid-feedback">{{ form.username.errors.0 }}</div>
            {% endif %}
        </div>
        <div class="mb-3">
            <label for="email" class="form-label">邮箱地址</label>
            <input type="email"
                   class="form-control {% if form.email.errors %}is-invalid{% endif %}"
                   id="email"
                   name="email"
                   value="{{ form.email.value|default:'' }}"
                   placeholder="your@email.com"
                   required>
            {% if form.email.errors %}
                <div class="invalid-feedback">{{ form.email.errors.0 }}</div>
            {% endif %}
        </div>
        <div class="mb-3">
            <label for="password1" class="form-label">密码</label>
            <input type="password"
                   class="form-control {% if form.password1.errors %}is-invalid{% endif %}"
                   id="password1"
                   name="password1"
                   autocomplete="new-password"
                   placeholder="请输入密码"
                   required>
            {% if form.password1.errors %}
                <div class="invalid-feedback">{{ form.password1.errors.0 }}</div>
            {% else %}
                <div class="form-text">密码至少需要8个字符</div>
            {% endif %}
        </div>
        <div class="mb-4">
            <label for="password2" class="form-label">确认密码</label>
            <input type="password"
                   class="form-control {% if form.password2.errors %}is-invalid{% endif %}"
                   id="password2"
                   name="password2"
                   autocomplete="new-password"
                   placeholder="请再次输入密码"
                   required>
            {% if form.password2.errors %}
                <div class="invalid-feedback">{{ form.password2.errors.0 }}</div>
            {% endif %}
        </div>
        <div>
            <button type="submit" class="btn btn-primary me-2 mb-2 mb-md-0 text-white w-100">
                <i data-lucide="user-plus"></i> 注册
            </button>
        </div>
    </form>
    <div class="text-center my-3">
        <span class="text-muted">或</span>
    </div>
    <!-- 第三方 OAuth 注册 -->
    <div class="mb-4 d-grid gap-2">
        <a href="{% url 'social:begin' 'github' %}" class="btn btn-outline-dark btn-icon-text w-100">
            <svg class="btn-icon-prepend" fill="currentColor" viewBox="-3 0 262 262" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <path d="M127.505 0C57.095 0 0 57.085 0 127.505c0 56.336 36.534 104.13 87.196 120.99 6.372 1.18 8.712-2.766 8.712-6.134 0-3.04-.119-13.085-.119-23.698-35.473 7.713-42.958-15.044-42.958-15.044-5.8-14.738-14.157-18.656-14.157-18.656-11.568-7.914.872-7.752.872-7.752 12.804.9 19.546 13.14 19.546 13.14 11.372 19.493 29.828 13.857 37.104 10.6 1.144-8.242 4.449-13.866 8.095-17.05-28.32-3.225-58.092-14.158-58.092-63.014 0-13.92 4.981-25.295 13.138-34.224-1.324-3.212-5.688-16.18 1.235-33.743 0 0 10.707-3.427 35.073 13.07 10.17-2.826 21.078-4.242 31.914-4.29 10.836.048 21.752 1.464 31.942 4.29 24.337-16.497 35.029-13.07 35.029-13.07 6.94 17.563 2.574 30.531 1.25 33.743 8.175 8.929 13.122 20.303 13.122 34.224 0 48.972-29.828 59.756-58.22 62.912 4.573 3.957 8.648 11.717 8.648 23.612 0 17.06-.148 30.791-.148 34.991 0 3.393 2.295 7.369 8.759 6.117 50.634-16.879 87.122-64.656 87.122-120.973C255.009 57.085 197.922 0 127.505 0"></path>
                </g>
            </svg>
            使用 GitHub 注册
        </a>
        <a href="{% url 'social:begin' 'gitee' %}" class="btn btn-outline-danger btn-icon-text w-100">
            <i class="btn-icon-prepend" data-lucide="git-branch"></i>
            使用 Gitee 注册
        </a>
        <a href="{% url 'social:begin' 'huggingface' %}" class="btn btn-outline-primary btn-icon-text w-100">
            <i class="btn-icon-prepend" data-lucide="brain"></i>
            使用 HuggingFace 注册
        </a>
    </div>
    <p class="mt-3 text-secondary">
        已有账号？
        <a href="{% url 'accounts:sign_in' %}">立即登录</a>
    </p>
{% endblock auth_content %}
